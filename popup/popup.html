<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heuristic Auditor</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="header-brand">
      <div class="header-logo">
        <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
          <circle cx="14" cy="14" r="14" fill="url(#grad1)" />
          <path d="M8 14.5L12 18.5L20 10.5" stroke="white" stroke-width="2.5" stroke-linecap="round"
            stroke-linejoin="round" />
          <defs>
            <linearGradient id="grad1" x1="0" y1="0" x2="28" y2="28">
              <stop offset="0%" stop-color="#667eea" />
              <stop offset="100%" stop-color="#764ba2" />
            </linearGradient>
          </defs>
        </svg>
      </div>
      <div>
        <h1 class="header-title">Heuristic Auditor</h1>
        <p class="header-subtitle">WCAG 2.1 + Nielsen</p>
      </div>
    </div>
    <button id="btn-legend" class="btn-legend" title="Guia de Legendas">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" />
        <path d="M6 6.5a2 2 0 1 1 2.5 1.94c-.41.12-.5.38-.5.56v.5" stroke="currentColor" stroke-width="1.3"
          stroke-linecap="round" />
        <circle cx="8" cy="12" r="0.8" fill="currentColor" />
      </svg>
    </button>
  </header>

  <!-- Estado: Idle -->
  <div id="state-idle" class="state-section">
    <div class="idle-illustration">
      <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
        <circle cx="32" cy="32" r="30" stroke="url(#grad2)" stroke-width="2" stroke-dasharray="4 4" opacity="0.5" />
        <circle cx="32" cy="32" r="20" fill="url(#grad2)" opacity="0.1" />
        <path d="M24 32L30 38L40 26" stroke="url(#grad2)" stroke-width="3" stroke-linecap="round"
          stroke-linejoin="round" />
        <defs>
          <linearGradient id="grad2" x1="0" y1="0" x2="64" y2="64">
            <stop offset="0%" stop-color="#667eea" />
            <stop offset="100%" stop-color="#764ba2" />
          </linearGradient>
        </defs>
      </svg>
    </div>
    <p class="idle-text">Clique para analisar a acessibilidade e usabilidade da página atual.</p>
    <button id="btn-analyze" class="btn-primary">
      <span class="btn-icon">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
          <circle cx="7.5" cy="7.5" r="5.5" stroke="currentColor" stroke-width="2" />
          <path d="M11.5 11.5L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </span>
      Analisar Página
    </button>
  </div>

  <!-- Estado: Analisando -->
  <div id="state-analyzing" class="state-section hidden">
    <div class="loader">
      <div class="loader-ring"></div>
      <div class="loader-ring"></div>
      <div class="loader-ring"></div>
    </div>
    <p class="analyzing-text">Analisando a página...</p>
    <p class="analyzing-subtext">Executando axe-core e mapeando heurísticas</p>
  </div>

  <!-- Estado: Resultados -->
  <div id="state-results" class="state-section hidden">
    <!-- Informações da Página -->
    <div class="page-info">
      <p id="page-title" class="page-title"></p>
      <p id="page-url" class="page-url"></p>
    </div>

    <!-- Cards de Severidade -->
    <div class="severity-cards">
      <div class="severity-card critical" data-severity="critical">
        <div class="severity-count" id="count-critical">0</div>
        <div class="severity-label">Crítico</div>
      </div>
      <div class="severity-card serious" data-severity="serious">
        <div class="severity-count" id="count-serious">0</div>
        <div class="severity-label">Sério</div>
      </div>
      <div class="severity-card moderate" data-severity="moderate">
        <div class="severity-count" id="count-moderate">0</div>
        <div class="severity-label">Moderado</div>
      </div>
      <div class="severity-card minor" data-severity="minor">
        <div class="severity-count" id="count-minor">0</div>
        <div class="severity-label">Menor</div>
      </div>
    </div>

    <!-- Estatísticas extras -->
    <div class="stats-row">
      <div class="stat-item">
        <span class="stat-value" id="stat-total-nodes">0</span>
        <span class="stat-label">Instâncias</span>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="stat-passes">0</span>
        <span class="stat-label">Aprovados</span>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="stat-inapplicable">0</span>
        <span class="stat-label">N/A</span>
      </div>
    </div>

    <!-- Lista de Problemas por Heurística -->
    <div class="issues-section">
      <h2 class="section-title">Problemas por Heurística</h2>
      <div id="issues-list" class="issues-list"></div>
    </div>

    <!-- Ações -->
    <div class="actions-bar">
      <button id="btn-reanalyze" class="btn-secondary">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path
            d="M1 7C1 3.68629 3.68629 1 7 1C9.22965 1 11.1602 2.25145 12.1 4.1M13 7C13 10.3137 10.3137 13 7 13C4.77035 13 2.83975 11.7486 1.9 9.9"
            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
          <path d="M12 1V4.5H8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round" />
          <path d="M2 13V9.5H5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
        Reanalisar
      </button>
      <button id="btn-toggle-overlay" class="btn-secondary">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <circle cx="7" cy="7" r="3" stroke="currentColor" stroke-width="1.5" />
          <path
            d="M7 1V2.5M7 11.5V13M1 7H2.5M11.5 7H13M2.75 2.75L3.81 3.81M10.19 10.19L11.25 11.25M11.25 2.75L10.19 3.81M3.81 10.19L2.75 11.25"
            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
        </svg>
        Overlay
      </button>
      <button id="btn-export" class="btn-primary-small">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M7 1V9M7 9L4 6M7 9L10 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round" />
          <path d="M1 10V11.5C1 12.3284 1.67157 13 2.5 13H11.5C12.3284 13 13 12.3284 13 11.5V10" stroke="currentColor"
            stroke-width="1.5" stroke-linecap="round" />
        </svg>
        JSON
      </button>
    </div>
    <div class="actions-bar" style="padding-top:6px;border-top:none;">
      <button id="btn-open-panel" class="btn-secondary" style="flex:1;">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <rect x="1" y="1" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.3" />
          <path d="M1 4h12" stroke="currentColor" stroke-width="1.3" />
          <path d="M8 7l2 2M8 7l-2 2M8 7V11" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"
            stroke-linejoin="round" opacity="0" />
          <path d="M5 8h4M5 10h2" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
          <circle cx="3" cy="2.5" r="0.7" fill="currentColor" />
          <circle cx="5" cy="2.5" r="0.7" fill="currentColor" />
        </svg>
        Destacar na Página (Mover Livremente)
      </button>
    </div>
  </div>

  <!-- Estado: Erro -->
  <div id="state-error" class="state-section hidden">
    <div class="error-icon">⚠️</div>
    <p id="error-message" class="error-text">Não foi possível analisar esta página.</p>
    <button id="btn-retry" class="btn-primary">Tentar Novamente</button>
  </div>
  <!-- Overlay de Legendas -->
  <div id="legend-overlay" class="legend-overlay hidden">
    <div class="legend-container">
      <div class="legend-header">
        <h2 class="legend-title">Guia de Legendas</h2>
        <button id="btn-close-legend" class="btn-close-legend">&times;</button>
      </div>
      <div class="legend-body">

        <!-- Níveis WCAG -->
        <div class="legend-section">
          <h3 class="legend-section-title">Níveis de Conformidade WCAG 2.1</h3>
          <div class="legend-item">
            <span class="legend-badge wcag-a">A</span>
            <div>
              <strong>Nível A — Essencial</strong>
              <p>Requisitos básicos de acessibilidade. Sem eles, usuários com deficiência <strong>não conseguem</strong>
                usar o conteúdo. Ex: textos alternativos, navegação por teclado.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-badge wcag-aa">AA</span>
            <div>
              <strong>Nível AA — Recomendado</strong>
              <p>Padrão adotado pela maioria das legislações (ex: LGPD, EN 301 549). Remove barreiras significativas.
                Ex: contraste mínimo 4.5:1, redimensionamento de texto.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-badge wcag-aaa">AAA</span>
            <div>
              <strong>Nível AAA — Ideal</strong>
              <p>Máximo nível de acessibilidade. Difícil de atingir em todas as páginas, mas recomendado onde possível.
                Ex: contraste 7:1, linguagem de sinais em vídeos.</p>
            </div>
          </div>
        </div>

        <!-- Severidade -->
        <div class="legend-section">
          <h3 class="legend-section-title">Níveis de Severidade</h3>
          <div class="legend-item">
            <span class="legend-dot critical"></span>
            <div>
              <strong>Crítico</strong>
              <p>Impede completamente o uso por pessoas com deficiência. Correção urgente.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-dot serious"></span>
            <div>
              <strong>Sério</strong>
              <p>Causa dificuldade significativa. Funcionalidade comprometida para muitos usuários.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-dot moderate"></span>
            <div>
              <strong>Moderado</strong>
              <p>Causa alguma dificuldade. Impacta a experiência mas não impede o uso.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-dot minor"></span>
            <div>
              <strong>Menor</strong>
              <p>Melhoria recomendada. Impacto baixo, mas contribui para uma experiência melhor.</p>
            </div>
          </div>
        </div>

        <!-- Ícones de Problema -->
        <div class="legend-section">
          <h3 class="legend-section-title">Ícones por Tipo de Problema</h3>
          <div class="legend-icons-grid" id="legend-icons-grid"></div>
        </div>

        <!-- Heurísticas de Nielsen -->
        <div class="legend-section">
          <h3 class="legend-section-title">10 Heurísticas de Nielsen</h3>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H1</span>
            <div>
              <strong>Visibilidade do Status do Sistema</strong>
              <p>O sistema deve informar o usuário sobre o que está acontecendo, com feedback apropriado e em tempo
                razoável.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H2</span>
            <div>
              <strong>Correspondência com o Mundo Real</strong>
              <p>O sistema deve usar linguagem familiar ao usuário, com palavras, frases e conceitos conhecidos.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H3</span>
            <div>
              <strong>Controle e Liberdade do Usuário</strong>
              <p>Usuários devem poder desfazer ações e sair de estados indesejados facilmente.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H4</span>
            <div>
              <strong>Consistência e Padrões</strong>
              <p>Palavras, situações e ações iguais devem ter os mesmos significados em todo o sistema.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H5</span>
            <div>
              <strong>Prevenção de Erros</strong>
              <p>O design deve prevenir erros antes que eles aconteçam, eliminando condições propícias a falhas.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H6</span>
            <div>
              <strong>Reconhecimento em vez de Recordação</strong>
              <p>Minimizar a carga de memória do usuário tornando opções e ações visíveis e acessíveis.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H7</span>
            <div>
              <strong>Flexibilidade e Eficiência de Uso</strong>
              <p>Atalhos e aceleradores para usuários experientes sem prejudicar iniciantes.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H8</span>
            <div>
              <strong>Design Estético e Minimalista</strong>
              <p>Interfaces não devem conter informações irrelevantes. Cada unidade extra compete com as relevantes.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H9</span>
            <div>
              <strong>Reconhecimento e Recuperação de Erros</strong>
              <p>Mensagens de erro devem ser claras, indicar o problema e sugerir uma solução construtiva.</p>
            </div>
          </div>
          <div class="legend-item compact">
            <span class="legend-heuristic-id">H10</span>
            <div>
              <strong>Ajuda e Documentação</strong>
              <p>Pode ser necessário fornecer ajuda e documentação, fácil de buscar e focada na tarefa do usuário.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>

</html>